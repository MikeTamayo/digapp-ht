<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/moment-element/moment-with-locales-import.html">
<link rel="import" href="../lodash.html">

<script src="../../scripts/common-transforms.js" type="text/javascript"></script>
<script src="../../scripts/related-entity-transform.js" type="text/javascript"></script>
<script src="../../scripts/phone-transform.js" type="text/javascript"></script>
<script src="../../scripts/offer-transform.js" type="text/javascript"></script>
<script src="../../scripts/seller-transform.js" type="text/javascript"></script>
<script src="../../scripts/webpage-transform.js" type="text/javascript"></script>
<script src="../../scripts/email-transform.js" type="text/javascript"></script>
<script src="../../scripts/provider-transform.js" type="text/javascript"></script>
<script src="../../scripts/image-transform.js" type="text/javascript"></script>
<script src="../../scripts/filter-agg-transform.js" type="text/javascript"></script>
<script src="../../scripts/cache-transform.js" type="text/javascript"></script>

<script>

  (function() {
    /**
     * This element is used to store configuration which is application specific
     * and is not available via a REST call to the server.  The main purpose is
     * to define each data transform for the json-transform element.
     */
    Polymer({
      is: 'client-config',
      properties: {
        config: {
          type: Object,
          notify: true,
          readOnly: true
        }
      },

      ready: function() {
        /* globals commonTransforms*/
        /* globals phoneTransform*/
        /* globals offerTransform*/
        /* globals emailTransform*/
        /* globals sellerTransform*/
        /* globals webpageTransform*/
        /* globals relatedEntityTransform*/
        /* globals providerTransform*/
        /* globals imageTransform*/
        /* globals filterAggTransform*/
        /* globals cacheTransform*/
        // TODO: define remaining client configuration.  Note that
        // client config should not be dependent upon the deployment
        // configuration.  Deployment dependencies should be made
        // on the server and retrieved from the GET /config REST
        // endpoint

        var config = {};

        // functions to be used in <json-transform> element to
        // to create generic models from server query response data
        config.transforms = {};
        config.transforms.phone = phoneTransform;
        config.transforms.seller = sellerTransform;
        config.transforms.offer = offerTransform;
        config.transforms.relatedEntities = relatedEntityTransform;
        config.transforms.email = emailTransform;
        config.transforms.webpage = webpageTransform;
        config.transforms.common = commonTransforms;
        config.transforms.provider = providerTransform;
        config.transforms.image = imageTransform;
        config.transforms.filterAggs = filterAggTransform;
        config.transforms.cache = cacheTransform;

        this._setConfig(config);
      }
    });
  })();
</script>
