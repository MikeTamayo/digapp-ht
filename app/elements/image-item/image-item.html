<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-styles/shadow.html">

<dom-module id="image-item">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>

    <style>
      :host {
        display: block;
      }

      .image-container {
        padding: 10px;
      }

      .image-container:hover {
        background-color: rgba(0,0,0,0.1);
      }

      .image-container > paper-button {
        margin: 0;
        padding: 0;
      }

      .image-container > paper-button > iron-image {
        --iron-image-width: 100%;
        --iron-image-height: 100%;
        width: 100px;
        height: 100px;
      }
    </style>

    <div class="layout vertical center image-container" on-mouseover="startHover" on-mouseout="endHover">
      <paper-button class="image-button" data-dialog="[[source]]" on-tap="onImageClick">
        <iron-image class$="[[styleClass]]" src="[[source]]" sizing="contain"></iron-image>
      </paper-button>

      <button-link
        link="[[link]]"
        link-target="[[linkTarget]]"
        link-text="[[linkText]]"
        show-link="[[hovering]]">
      </button-link>
    </div>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'image-item',

      properties: {
        /**
         * The index of the image to be given to the imageClickListener.
         */
        imageIndex: {
          type: Number,
          value: 0
        },

        /**
         * The link URL to open a page within the application.
         */
        link: {
          type: String,
          value: ''
        },

        /**
         * The target page of the link.
         */
        linkTarget: {
          type: String,
          value: '_self'
        },

        /**
         * The text to show in the link.
         */
        linkText: {
          type: String,
          value: ''
        },

        /**
         * The style class of the image.
         */
        styleClass: {
          type: String,
          value: ''
        },

        /**
         * The source URL of the image.
         */
        source: {
          type: String,
          value: ''
        },

        /**
         * An object with a function property called if the image is clicked or tapped.
         * The name of the property in the object is defined in imageClickProperty.
         */
        imageClickListener: {
          type: Object,
          value: function() {
            return {
              onImageClick: function() {}
            };
          }
        },

        /**
         * The name of the function property in imageClickListener.
         */
        imageClickProperty: {
          type: String,
          value: 'onImageClick'
        },

        /**
         * Whether the user is hovering over the image container.
         */
        hovering: {
          type: Boolean,
          value: false
        }
      },

      startHover: function() {
        this.hovering = true;
      },

      endHover: function() {
        this.hovering = false;
      },

      onImageClick: function() {
        this.imageClickListener[this.imageClickProperty](parseInt(this.imageIndex));
      }
    });
  })();
  </script>
</dom-module>
