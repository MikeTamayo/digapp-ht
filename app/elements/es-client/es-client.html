<link rel="import" href="../../bower_components/polymer/polymer.html">
<script src="../../bower_components/elasticsearch/elasticsearch.js"></script>

<script>
(function () {
  'use strict';
  /* globals elasticsearch  */

  Polymer({
    is: 'es-client',
    properties: {
      hostUrl: {
        type: String,
        observer: 'createEsClient'
      },
      client: {
        type: Object,
        notify: true
      }
    },

    createEsClient: function(hostUrl) {
      this.client = new elasticsearch.Client({host: hostUrl});

      this.client.ping({
        requestTimeout: 30000,
        hello: 'elasticsearch'
        }, function (error) {
          if (error) {
            console.error('elasticsearch cluster is down!');
          } else {
            console.log('elasticsearch cluster is up');
          }
      });

     //window.app.client = this.client;
    }
  });
})();
</script>
